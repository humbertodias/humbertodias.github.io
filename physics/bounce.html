<div id="glowscript" class="glowscript">
<link type="text/css" href="http://www.glowscript.org/css/redmond/1.1/jquery-ui.custom.css" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">
<link type="text/css" href="http://www.glowscript.org/css/ide.css" rel="stylesheet" />
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript" src="http://www.glowscript.org/lib/jquery/1.1/jquery.min.js"></script>
<script type="text/javascript" src="http://www.glowscript.org/lib/jquery/1.1/jquery-ui.custom.min.js"></script>
<script type="text/javascript" src="http://www.glowscript.org/package/glow.1.1.min.js"></script>
<script type="text/javascript">
;(function() {
var __g=typeof global!=='undefined'?global:window;__g=(__g.__streamline||(__g.__streamline={}));__g.setEF=__g.setEF||function(e,f){e.__frame = e.__frame||f};var __srcName='undefined_.js';
function __func(_,__this,__arguments,fn,index,frame,body){if(!_){return __future.call(__this,fn,__arguments,index)}frame.file=__srcName;frame.prev=__g.frame;__g.frame=frame;try{body()}catch(e){__g.setEF(e,frame.prev);__propagate(_,e)}finally{__g.frame=frame.prev}}
function __cb(_,frame,offset,col,fn){frame.offset=offset;frame.col=col;var ctx=__g.context;return function ___(err,result){var oldFrame=__g.frame;__g.frame=frame;__g.context=ctx;try{if(err){__g.setEF(err,frame);return _(err)}return fn(null,result)}catch(ex){__g.setEF(ex,frame);return __propagate(_,ex)}finally{__g.frame=oldFrame}}}
function __future(fn,args,i){var done,err,result;var cb=function(e,r){done=true;err=e,result=r};args=Array.prototype.slice.call(args);args[i]=function ___(e,r){cb(e,r)};fn.apply(this,args);return function ___(_){if(done)_.call(this,err,result);else cb=_.bind(this)}.bind(this)}
function __propagate(_,err){try{_(err)}catch(ex){__trap(ex)}}
function __trap(err){if(err){if(__g.context&&__g.context.errorHandler)__g.context.errorHandler(err);else console.error("UNCAUGHT EXCEPTION: "+err.message+"\n"+err.stack)}}
/*     1 */ function main(wait) {
              var version, scene, side, thk, s2, s3, wallR, wallL, wallB, wallT, wallBK, ball, dt;
/*     6 */   function display_instructions() {
/*     7 */     var s = "In GlowScript programs:\n\n";
/*     8 */     s += "    Rotate the camera by dragging with the right mouse button,\n        or hold down the Ctrl key and drag.\n\n";
/*     9 */     s += "    To zoom, drag with the left+right mouse buttons,\n         or hold down the Alt/Option key and drag,\n         or use the mouse wheel.\n";
/*    10 */     s += "\nTouch screen: pinch/extend to zoom, swipe or two-finger rotate.";
/*    11 */     scene.caption.text(s);
              };
              var __frame = {
                name: "main",
                line: 1
              };
              return __func(wait, this, arguments, main, 0, __frame, function __$main() {
/*     1 */     version = ["1.1","glowscript",];
/*     1 */     scene = canvas();
/*    14 */     scene.title.text("A ball bounces in a box");
/*    16 */     display_instructions();
/*    18 */     scene.title.text("A ball bounces in a box");
/*    21 */     side = 4;
/*    22 */     thk = 0.3;
/*     1 */     s2 = 2["*"](side)["-"](thk);
/*     1 */     s3 = 2["*"](side)["+"](thk);
/*    25 */     wallR = box({
/*    25 */       pos: vec(side, 0, 0),
/*    25 */       size: vec(thk, s2, s3),
/*    25 */       color: color.red
                });
/*    26 */     wallL = box({
/*    26 */       pos: vec(side["-u"](), 0, 0),
/*    26 */       size: vec(thk, s2, s3),
/*    26 */       color: color.red
                });
/*    27 */     wallB = box({
/*    27 */       pos: vec(0, side["-u"](), 0),
/*    27 */       size: vec(s3, thk, s3),
/*    27 */       color: color.blue
                });
/*    28 */     wallT = box({
/*    28 */       pos: vec(0, side, 0),
/*    28 */       size: vec(s3, thk, s3),
/*    28 */       color: color.blue
                });
/*    29 */     wallBK = box({
/*    29 */       pos: vec(0, 0, side["-u"]()),
/*    29 */       size: vec(s2, s2, thk),
/*    29 */       color: color.gray(0.7)
                });
/*    31 */     ball = sphere({
/*    31 */       color: color.green,
/*    31 */       size: 0.8["*"](vec(1, 1, 1))
                });
/*    32 */     ball.mass = 1;
/*    33 */     ball.p = vec(0.15["-u"](), 0.23["-u"](), +0.27);
/*    34 */     attach_trail(ball, {
/*    34 */       pps: 200,
/*    34 */       retain: 100
                });
/*    36 */     side = side["-"](thk["*"](0.5))["-"](ball.size.x["/"](2));
/*    37 */     dt = 0.3;
                return (function ___(__break) {
                  var __more;
                  var __loop = __cb(wait, __frame, 0, 0, function __$main() {
                    __more = false;
/*    39 */         var __1 = true;
                    if (__1) {
/*    43 */           return rate(200, __cb(wait, __frame, 42, -1, function __$main() {
/*    44 */             ball.pos = ball.pos["+"](ball.p["/"](ball.mass)["*"](dt));
/*    45 */             if (!(((side["-u"]() < ball.pos.x) && (ball.pos.x < side)))) {
/*    46 */               ball.p.x = ball.p.x["-u"]();
                        }
                      ;
/*    48 */             if (!(((side["-u"]() < ball.pos.y) && (ball.pos.y < side)))) {
/*    49 */               ball.p.y = ball.p.y["-u"]();
                        }
                      ;
/*    51 */             if (!(((side["-u"]() < ball.pos.z) && (ball.pos.z < side)))) {
/*    52 */               ball.p.z = ball.p.z["-u"]();
                        }
                      ;
                        while (__more) {
                          __loop();
                        };
                        __more = true;
                      }));
                    }
                     else {
                      __break();
                    }
                  ;
                  });
                  do {
                    __loop();
                  } while (__more);
                  __more = true;
                })(function __$main() {
                  wait();
                });
              });
            };
/*    57 */ main;

;$(function(){ window.__context = { glowscript_container: $("#glowscript").removeAttr("id") }; main() })})()
</script>
</div>